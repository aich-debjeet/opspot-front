<style>
    ::ng-deep .memberToggle
         .m-modal-container{ 
          width: 543px !important;
          min-width: 0;
          min-height: 0;
            }
   
   
     ::ng-deep .memberToggle   
         .mdl-card {
            padding: 46px 40px !important;
            border-radius:4px !important;
          }  
      ::ng-deep .inviteToggle
      .m-modal-container{ 
          width: 543px !important;
          min-width: 0;
          min-height: 0;
            }
       ::ng-deep .inviteToggle
       .mdl-card {
            padding: 46px 40px !important;
            border-radius:4px !important;
          } 
   
   </style>
   
   
   <div *ngIf="dev">
    
   <div [hidden]="group || error" style="width:100%; text-align:center; ">
     <div class="mdl-spinner mdl-js-spinner is-active" [mdl] style="margin: 16px auto;"></div>
   </div>
   
   <div class="m-error-splash" *ngIf="error && !group">
     <img [src]="opspot.cdn_assets_url + 'assets/logos/logo.svg'">
     <h3 class="mdl-color-text--red-300">{{error}}</h3>
     <span class="mdl-color-text--blue-grey-300">Check the url is correct</span>
     <router-outlet></router-outlet>
   </div>
   
   <div class="m-group__grid" *ngIf="group && (group['is:member'] || group.membership == 2)"
   
   >
   
     <!-- Sidebar -->
     <div class="m-groupGrid__left">
       <m-videochat></m-videochat>
   
       <!-- <header
         *ngIf="group && (group['is:member'] || group.membership == 2)"
         [ngClass]="[ 'm-group--' + filter + '-view' ]"
         [class.m-group--view-mode]="!editing"
       >
         <opspot-banner 
           [object]="group"
           [editMode]="editing"
           [top]="group.banner_position"
           [done]="editDone"
           (added)="add_banner($event)"
           >
         </opspot-banner>
       </header> -->
   
       <div class="m-group__infoWrapper">
         <div class="m-group__info m-border">
           <opspot-avatar
             [object]="group"
             [editMode]="editing"
             (added)="upload_avatar($event)"
             >
           </opspot-avatar>
         
           <opspot-groups-settings-button
             [(group)]="group"
             class="m-button"
             (change)="onOptionsChange($event)"
             >
           </opspot-groups-settings-button>
   
           <div class="m-groupInfo__member-previews">
             <m-group--member-previews [group]="group"></m-group--member-previews>
           </div>
   
           <!-- Name -->
           <div class="m-groupInfo__name m-group-info-name mdl-color-text--blue-grey-800">
   
             <div [hidden]="editing || !group.name">
               <h1>
                 <a class="m-isomorphic-link" [routerLink]="['/groups/profile', group.guid]">
                   {{group.name}}
                 </a>
               </h1>
               <div class="m-groupInfo__actionButtons">
               <opspot-groups-join-button 
                 [group]="group"
                 (membership)="change_membership($event)"
                 *ngIf="(!group['is:creator'] || (session.isAdmin()) && !group['is:invited'])"
               >
               </opspot-groups-join-button>
               <button class="m-btn m-btn--slim m-btn--with-icon" style="margin-left: 8;" (click)="videochat.activate(group)" *ngIf="!group.videoChatDisabled">
                 <span class="m-gatheringIcon">Gathering</span>
                 <i class="material-icons">video_call</i>
               </button>
             </div>
           </div>
   
           <div *ngIf="editing && group['is:owner']">
             <input type="text" class="h1" name="name" [(ngModel)]="group.name" placeholder="Enter a name" i18n-placeholder="@@GROUPS__NAME_PLACEHOLDER" />
           </div>
   
         </div> <!-- END NAME -->
   
         <!-- Brief description -->
         <p
           class="m-groupInfo__description"
           [hidden]="editing || !group.briefdescription"
           [innerHtml]="group.briefdescription | tags"
           >
         </p>
         
         <p
           class="m-groupInfo__description"
           *ngIf="editing && group['is:owner']"
           >
           <mwl-text-input-autocomplete-container>
             <textarea
               name="briefdescription"
               [autoGrow]
               [(ngModel)]="group.briefdescription"
               placeholder="Enter a brief description"
               i18n-placeholder="@@GROUPS__DESCRIPTION_PLACEHOLDER"
               mwlTextInputAutocomplete
               [findChoices]="findTrendingHashtags.bind(this)"
               [getChoiceLabel]="getChoiceLabel"
               [triggerCharacter]="'#'"
             >
             </textarea>
           </mwl-text-input-autocomplete-container>
         </p>
         
         <ng-container *ngIf="false">
   
         <!-- Tags -->
         <div class="m-group-info-tags">
           <div>
             <i class="material-icons">local_offer</i>
             <ng-container *ngIf="!editing && group.tags">
               <span *ngFor="let tag of group.tags">#{{tag}}</span>
             </ng-container>
             <m-hashtags-selector #hashtagsSelector
               [alignLeft]="true"
               [tags]="group.tags"
               (tagsChange)="onTagsChange($event)"
               (tagsAdded)="onTagsAdded($event)"
               (tagsRemoved)="onTagsRemoved($event)"
               *ngIf="editing && group['is:owner']"
             ></m-hashtags-selector> 
           </div>
   
         </div>
   
         <!-- Membership -->
         <div class="m-group-info-membership">
   
           <div [hidden]="editing || group.membership != 2">
             <i class="material-icons">public</i>
             <span i18n="@@GROUPS__OPEN_GROUP">Open Group</span>
           </div>
   
           <div [hidden]="editing || group.membership != 0">
             <i class="material-icons">lock</i>
             <span i18n="@@GROUPS__CLOSED_GROUP">Closed Group</span>
           </div>
   
           <div *ngIf="editing && group['is:owner']">
             <i class="material-icons">{{ group.membership == 2 ? 'public' : 'lock' }}</i>
             <select class="icon-prefix" name="membership" [ngModel]="group.membership" (change)="group.membership = $event.target.value">
               <option value="2" i18n="@@GROUPS__OPEN_GROUP">Open Group</option>
               <option value="0" i18n="@@GROUPS__CLOSED_GROUP">Closed Group</option>
             </select>
           </div>
   
         </div>
   
         <!-- Post moderation -->
         <div class="m-group-info-moderated" *ngIf="group['is:owner']">
   
           <div [hidden]="editing || group.moderated != 0">
             <i class="material-icons">rate_review</i>
             <span i18n="@@GROUPS__ANYONE_CAN_POST">Anyone can post</span>
           </div>
   
           <div [hidden]="editing || group.moderated != 1">
             <a [routerLink]="['/groups/profile', group.guid, 'review']">
               <i class="material-icons">rate_review</i>
               <span>
                 <ng-container i18n="@@GROUPS__POSTS_ARE_MODERATED">Posts are moderated</ng-container>
                 <b *ngIf="group['adminqueue:count']">
                   (<ng-container i18n="@@GROUPS__PROFILE__ADMINQUEUE_COUNT">{{ group['adminqueue:count'] }} new</ng-container>)
                 </b>
               </span>
             </a>
           </div>
   
           <div *ngIf="editing && group['is:owner']">
             <i class="material-icons">rate_review</i>
             <select class="icon-prefix" name="moderated" [ngModel]="group.moderated" (change)="group.moderated = $event.target.value">
               <option value="0" i18n="@@GROUPS__ANYONE_CAN_POST">Anyone can post</option>
               <option value="1" i18n="@@GROUPS__POSTS_ARE_MODERATED">Posts are moderated</option>
             </select>
           </div>
   
         </div>
   
         <!-- Default view -->
         <div class="m-group-info-moderated" *ngIf="group['is:owner']">
   
           <div [hidden]="editing || group.default_view != 0">
             <i class="material-icons">pageview</i>
             <span i18n="@@GROUPS__DEFAULT_VIEW_FEED">Default view: Feed</span>
           </div>
   
           <div [hidden]="editing || group.default_view != 1">
             <i class="material-icons">pageview</i>
             <span i18n="@@GROUPS__DEFAULT_VIEW_CONVERSATIONS">Default view: Conversations</span>
           </div>
   
           <div *ngIf="editing && group['is:owner']">
             <i class="material-icons">pageview</i>
             <select class="icon-prefix" name="default_view" [ngModel]="group.default_view" (change)="group.default_view = $event.target.value">
               <option value="0" i18n="@@GROUPS__DEFAULT_VIEW_FEED">Default view: Feed</option>
               <option value="1" i18n="@@GROUPS__DEFAULT_VIEW_CONVERSATIONS">Default view: Conversations</option>
             </select>
           </div>
   
         </div>
   
         <!-- Video calls -->
         <div class="m-group-info-video-calls" *ngIf="group['is:owner'] && session.isAdmin()">
   
           <div [hidden]="editing" *ngIf="group.videoChatDisabled == 0">
             <i class="material-icons">call</i>
             <span i18n="@@GROUPS__VIDEO_CALLS_ENABLED">Video calls enabled</span>
           </div>
   
           <div [hidden]="editing" *ngIf="group.videoChatDisabled == 1">
             <i class="material-icons">call</i>
             <span i18n="@@GROUPS__VIDEO_CALLS_DISABLED">Video calls disabled</span>
           </div>
   
           <div *ngIf="editing && group['is:owner']">
             <i class="material-icons">call</i>
             <select class="icon-prefix" name="video_calls" [ngModel]="group.videoChatDisabled" (change)="group.videoChatDisabled = $event.target.value">
               <option value="0" i18n="@@GROUPS__VIDEO_CALLS_ENABLED">Video calls enabled</option>
               <option value="1" i18n="@@GROUPS__VIDEO_CALLS_DISABLED">Video calls disabled</option>
             </select>
           </div>
   
         </div>
   
         <!-- Extra actions -->
         <div class="m-group-boost" *ngIf="session.isLoggedIn() && !editing && group['is:owner']">
           <i class="material-icons">trending_up</i>
           <opspot-button-boost [object]="group"></opspot-button-boost>
         </div>
   
         </ng-container>
   
         </div> <!-- END INFO -->
       </div> <!-- END INFO WRAPPER -->
   
       <m-groups--filter-selector
         [group]="group"
         [filter]="filter"
         *ngIf="group['is:member']"
       ></m-groups--filter-selector>
   
       <div class="m-group__feeds">
         <router-outlet></router-outlet> 
       </div> <!-- End Feeds -->
     </div> <!-- END LEFT BLOCK -->
   
     <div class="m-groupGrid__toggleBtn" style="
       /* left: 0; */
       position: fixed;
       top: 55px;
       right: 60px;
       display: block;
       z-index: 99;
       cursor: pointer;
       "
       (click)="toggleConversations()">
        <i class="material-icons" style="
         font-size: 32px;
         color: #888;
         " *ngIf="showRight">keyboard_arrow_right</i>
        <i class="material-icons" style="
         font-size: 32px;
         color: #888;
         " *ngIf="!showRight">keyboard_arrow_left</i> 
       </div>
   
     <div class="m-groupGrid__right" [hidden]="!showRight">
       <!-- Conversation filter -->
       <opspot-groups-profile-conversation [group]="group">
       </opspot-groups-profile-conversation>
       <!-- END: Conversation filter -->
     </div> <!-- END RIGHT BLOCK -->
   </div>
   
   
   <!-- IF A CLOSED GROUP AND NOT A MEMBER -->
   <div class="m-group__splash--closed-group" *ngIf="group && !group['is:member'] && group.membership != 2">
   
     <opspot-banner [object]="group" [top]="group.banner_position"></opspot-banner>
   
     <div class="m-groupSplash__inner">
   
       <div class="m-groupSplash__avatar">
         <opspot-avatar [object]="group" [editMode]="editing" (added)="upload_avatar($event)"></opspot-avatar>
       </div>
   
       <div class="m-group-info-name mdl-color-text--blue-grey-800">
         <h1>{{group.name}}</h1>
       </div>
   
       <div class="m-groupSplash__error" [ngSwitch]="error">
         <ng-container i18n="@@GROUPS__YOU_HAVE_BEEN_BANNED__NOTICE" *ngSwitchCase="'banned'">You've been banned from this group</ng-container>
         <ng-container i18n="@@GROUPS__YOU_HAVE_BEEN_BANNED__NOTICE" *ngSwitchDefault>{{error}}</ng-container>
       </div>
   
       <opspot-groups-join-button [group]="group" (membership)="change_membership($event)" *ngIf="!error"></opspot-groups-join-button>
   
     </div>
   
   </div>
   </div>
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   <div class="container hidden-above-tablet">
       <div class="without-nav-header">
           <a routerLink=".."><i class="icon-arrow-left"></i> </a>
           <div class="without-nav-header__title caption-bold f500">Community</div>
       </div>
   </div>
   
   
   
   
   
   <div [hidden]="group || error" style="width:100%; text-align:center; ">
       <div class="mdl-spinner mdl-js-spinner is-active" [mdl] style="margin: 16px auto;"></div>
     </div>
     
     <div class="m-error-splash" *ngIf="error && !group">
       <img [src]="opspot.cdn_assets_url + 'assets/logos/logo.svg'">
       <h3 class="mdl-color-text--red-300">{{error}}</h3>
       <span class="mdl-color-text--blue-grey-300">Check the url is correct</span>
       <router-outlet></router-outlet>
     </div>
     
   
   
   <div *ngIf="!dev&&!error" class="container">
       <div class="o-blocks o-blocks--flex">
           <div  class="o-left-block o-left-block--community">
               <app-group-banner class="o-cover o-cover--community hidden-above-tablet" 
               [object]="group"
               [editMode]="editing"
               [top]="group.banner_position"
               [done]="editDone"
               (added)="add_banner($event)"
   
               ></app-group-banner>   
               <!-- <div class="o-cover o-cover--community hidden-above-tablet"
                style="background:url(assets/demo/m2.jpg)
                 no-repeat; background-size: cover;
                  background-position: left;">
                  <div class="o-cover__actions">
                     <a class="o-cover-edit o-cover-edit--community"><i class="icon-edit-profile"></i></a>
                     <a  class="o-cover-community-discussion">
                         <i class="icon-message-square"></i> 
                         <i class="icon-chevron-right"></i>
                     </a>
                 </div>
               </div> -->
               
               <div class="o-card o-community-info o-community-info--radius o-community-info--shadow">
                   <div class="o-community-option-drop">
                       <!-- <div  class="o-community-option-drop__btn head-action__link"><i class="icon-more-vertical f-15"></i> </div> -->
                             <opspot-groups-settings-button
                             [(group)]="group"
                              class="o-community-option-drop__btn head-action__link"
                            (change)="onOptionsChange($event)"
                             >
                        </opspot-groups-settings-button>
                       <div id="o-community-option-dropdown" class="o-community-option-drop__block">
                           <a href="#">comming ..</a>
                       </div>
                   </div><!-- options dropdown-->
                   <div class="o-community-img-block">
                           <opspot-avatar
                           [object]="group"
                           [editMode]="editing"
                           [profileEdit]="true"
                           (added)="upload_avatar($event)"
                           >
                         </opspot-avatar>
                           <!-- <a class="o-community-img-edit"><i class="icon-edit-profile"></i></a> -->
                   </div><!-- community prof img end -->
                   
                   <div class="o-community-name">
                       <h5 class="f700">{{group.name}}</h5>
                   </div><!-- community name end -->
                   
                   <div class="o-community-skills" *ngIf="!editing && group.tags" >
                       <a *ngFor="let tag of group.tags" href="" class="o-community-skills__tag">#{{tag}}></a>
                   </div><!-- community skill end -->
                   <opspot-groups-join-button 
                   style="margin-bottom: 6px;"
                   [group]="group"
                   (membership)="change_membership($event)"
                   *ngIf="(!group['is:creator'] || (session.isAdmin()) && !group['is:invited'])"
                   >
   
                  </opspot-groups-join-button>
                   <div class="o-community-members-top o-community-members-top--mob hidden-above-tablet">
                       <a class="o-community-members-top__count-mob" *ngFor="let member of membersMobile">
                           <span class="o-community-members-list-mob-single"><img [src]="memberSrc+member.guid" alt=""></span>
                       </a>
                       <a (click)="openInvite()" class="o-community-add-members-mob"><i class="icon-plus"></i></a>
                   </div><!-- community members mob end-->
                   <m-videochat></m-videochat>
   
                   <div class="o-community-gathering-block" >
                       <a (click)="videochat.activate(group)" *ngIf="!group.videoChatDisabled"  class="o-community-gathering"><i class="icon-video"></i> <span class="text-sm f500 primary">Gathering</span></a>
                   </div><!-- gathering block end -->
                   <div class="o-community-members-top ">
                       <a (click)="showMembers()"  class="o-community-members-top__count">
                           <div class="caption-bold">{{totalMembers|abbr}}</div>
                           <div class="text-sm grey">Members</div>
                       </a>
                   </div><!-- community members web end-->
                 
                 <m-modal [open]="inviteToggle" [allowClose]="true" class="inviteToggle">
                     <opspot-groups-profile-members-invite  [group]="group"></opspot-groups-profile-members-invite>
                 </m-modal>
                 <m-modal [open]="memberToggle" [allowClose]="true" class="memberToggle" >
                     <opspot-groups-profile-members ></opspot-groups-profile-members>
                 </m-modal>
   
   
                   <div class="o-community-discrptn">
                       <div class="text-md" >
                             <a *ngIf="(group.briefdescription?group.briefdescription.length<30:true); else readMo"> {{group.briefdescription}} </a> 
                             <ng-template #readMo>
                                 <readMore >
                                {{group.briefdescription}}
                                   </readMore>
                             </ng-template>                       
                       </div>
   
                   </div>
               </div><!--community info block end-->
             <div class="o-cards o-community-members hidden-under-tablet">
                 <div class="o-community-members__header">
                     <div class="text-lg f500">
                       Community Members
                     </div> 
                     <span (click)="openInvite()" style="font-size: 24px !important;" class="icon-plus-circle primary">            
                     </span>
                 </div>
                 <opspot-groups-profile-members (totalGroup)="groupCount($event)"  [frmGroup]="true"></opspot-groups-profile-members>
             </div>
           </div>
             <div class="o-center-block">
               <div class=" hidden-under-tablet" style="width:100%; height: 187px; margin-bottom:9px;">
                   <app-group-banner
                   [object]="group"
                   [editMode]="editing"
                   [top]="group.banner_position"
                   [done]="editDone"
                   (added)="add_banner($event)"
   
                   ></app-group-banner>       
                   </div>
                   <div class="tabs-community">
                       <ul class="tabs-list" *ngIf="filter == 'activity' && (group['is:owner']||group['is:moderator']) && group['adminqueue:count']"
                       >
                         <li routerLinkActive="active" routerLink="feed" [routerLinkActiveOptions]="{exact:
                           true}"  > <a> Feed</a></li>
                         <li routerLinkActive="active"  routerLink="feed/review" > <a> Review queue  
                           <div class="review-count text-md white">
                               {{ group['adminqueue:count'] }}
                           </div></a></li>
                       </ul>
                     </div>
                <router-outlet></router-outlet> 
             </div>
             <div class="o-right-block hidden-mob">
               <div class="o-discussions">
                   <div class="o-discussions-title">
                       <div class="text-lg f500">
                           Discussions
                       </div>
                   </div>
                   <div class="o-discussions-body">
                       <opspot-groups-profile-conversation [group]="group">
                         </opspot-groups-profile-conversation>
                   </div>
               </div>
             </div>
   
       </div>
   
   </div>
   
   